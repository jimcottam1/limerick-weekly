services:
  # Main web service
  - type: web
    name: limerick-weekly
    env: node
    plan: free
    buildCommand: npm install && node scripts/post-deploy.js
    startCommand: npm start
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 3000
      - key: GEMINI_API_KEY
        sync: false
      - key: REDIS_URL
        sync: false
      - key: NEWSAPI_KEY
        sync: false
      - key: UPDATE_TOKEN
        sync: false
      - key: RSS_FEEDS
        value: https://www.limerickpost.ie/feed/,https://www.limerickleader.ie/rss/,https://www.live95.ie/feed/
      - key: LIMERICK_KEYWORDS
        value: Limerick,Munster,Shannon,Treaty City
      - key: ARTICLES_TO_ANALYZE
        value: 50
      - key: TOP_STORIES_COUNT
        value: 10
      - key: MIN_ARTICLE_LENGTH
        value: 100
      - key: MAX_DAILY_REWRITES
        value: 20
